# 컴퓨터 알고리즘 2022 1학기 중간고사
*인천대학교 정보통신공학과 201901687 양수진*


1. **Ford-Fulkerson 알고리즘이란?**
* 최대유량 알고리즘을 해결할때 그래프의 경로를 찾는과정에서 깊이우선탐색 *(DFS)* 을 활용하는 알고리즘이다.
* 깊이우선탐색 그래프  
![dfs](https://user-images.githubusercontent.com/101388182/165067198-1348cca2-b4ba-4e89-b11c-bef7808a0672.png)

>Ford-Fulkerson 알고리즘을 이해하기 위해서는 최대유량 알고리즘에 대한 이해가 우선적으로 필요하다.

---
2. **최대유량 알고리즘이란?**
* 최대유량 알고리즘이란 가중치가 있는 방향그래프 *G*와 시작노드 *s (source)*, 도착노드 *t (sink)* 가 주어졌을 때 각
**엣지의 용량**을 고려하여 s에서 t로 흘려보낼 수 있는 최대 유량을 구하는 알고리즘인데, 경로를 구할때 깊이우선탐색(DFS)을
활용하면 **Ford-Fulkerson** 풀이법이 되는 것 이고, 너비우선탐색(BFS)를 활용하면 **Edmonds-Karp** 풀이법이 된다.(Edmonds-Karp 알고리즘은 조금 뒤에 알아보자)
최대유량 문제에서 상황에 따라 2가지 방법 중 효율적인 풀이법으로 접근하는 것이 좋다.
* 각 엣지의 가중치를 **용량(capacity)** 이라고 하고 *(u,v)* 의 용량을 *c(u,v)* 라고 쓰며 노드 u와 v 사이를 흐르는 유량(flow)은 
*f(u,v)*, 엣지의 용량과 유량의 차이를 잔여용량 *r(u,v)* 라고 쓴다. 또한 4가지 제약조건이 있는데
  1. 용량은 항상 0이상이다.
  2. *f(u,v)≤c(u,v)* 유량은 용량을 초과할 수 없다.
  3. *f(u,v)=−f(v,u)* 반대방향으로 흐르는 유량은 음수가 된다.
  4. 각 노드에서 유량은 새로 더해지거나 감소되지 않는다.
* 유량 상쇄
유량 상쇄는 모든 경로에 기존에 존재하는 엣지들과 반대되는 방향의 엣지를 추가한 뒤, 각 엣지로 유량을 흘려보냈을 때 **반대 방향의 엣지로도 음의 유량을 흘려보냄**으로 인해 유량을 상쇄시키는 것이다. 이것은 음의 유량을 기록함으로써 잔여 용량을 남겨 추가적인 경로를 탐색할 수 있도록 하기 위한 작업인 셈이다.

* 표기 방법
용량이 c(u,v)=12이고 c(v,u)=8이며 u에서 v로의 유량이 5라면 다음과 같이 표시할 수 있다.
<img width="383" alt="예시1" src="https://user-images.githubusercontent.com/101388182/165073538-cf34cc9a-9730-442a-8cb7-d0b9d7e4d9b1.png">

* 최대유량 알고리즘 그래프의 예시
<img width="214" alt="유량 예시" src="https://user-images.githubusercontent.com/101388182/165070580-28528c11-c513-4421-ac4e-db5086f352b0.png">

---
3. **Ford-Fulkerson 알고리즘 실행과정**
    1. 그래프에 존재하는 모든 엣지의 유량을 0 으로 초기화하고, 반대방향 엣지의 유량도 0 으로 초기화한다.
    2. 시작점에서 도착점으로 갈 수 있는 경로중 잔여 용량이 남은 경로를 **DFS** 로 탐색한다.
    3. 해당 경로에 존재하는 엣지들의 잔여용량 중 가장 작은 값을 유량으로 흘려보낸다.
    4. 해당 유량에 음수값을 취해, 반대방향 엣지에도 흘려보내 유량상쇄를 한다.
    5. 더 이상 잔여용량이 남은 경로가 존재하지 않을때까지 반복한다.
    6. 탐색했던 각 경로들의 최소유량을 합하면 최종적으로 구하고자 하는 최대유량을 알수있다.
---
4. **Ford-Fulkerson 알고리즘 코드 실행결과**
* 최대유량 그래프 예시
<img width="619" alt="유량 예시" src="https://user-images.githubusercontent.com/101388182/165442731-ea641993-eab9-4867-a9b7-4056e4712ec4.png">

* DFS 활용부분  
<img width="557" alt="포드 이용부분" src="https://user-images.githubusercontent.com/101388182/165449547-12216125-ea05-44a0-ba37-0170e20c03a0.PNG">


* 코드 실행결과창
<img width="563" alt="포드 실행결과창" src="https://user-images.githubusercontent.com/101388182/165443055-2f4f558a-8093-48a8-a01c-cba999dc9a42.png">

---
5. **Edmonds-Karp 알고리즘이란?**
* 최대유량 알고리즘을 해결할때 그래프의 경로를 찾는과정에서 너비우선탐색 *(BFS)* 을 활용하는 알고리즘이다.
* 너비우선탐색 그래프  
![bfs](https://user-images.githubusercontent.com/101388182/165445227-0f54787a-cead-4c7f-9c01-96d5644d9add.png)

---
6. **Edmonds-Karp 알고리즘 실행과정**  
Ford-Fulkerson 알고리즘과 경로탐색시 탐색방법에만 차이가 있고 나머지는 같다.
    1. 그래프에 존재하는 모든 엣지의 유량을 0 으로 초기화하고, 반대방향 엣지의 유량도 0 으로 초기화한다.
    2. 시작점에서 도착점으로 갈 수 있는 경로중 잔여 용량이 남은 경로를 **BFS** 로 탐색한다.
    3. 해당 경로에 존재하는 엣지들의 잔여용량 중 가장 작은 값을 유량으로 흘려보낸다.
    4. 해당 유량에 음수값을 취해, 반대방향 엣지에도 흘려보내 유량상쇄를 한다.
    5. 더 이상 잔여용량이 남은 경로가 존재하지 않을때까지 반복한다.
    6. 탐색했던 각 경로들의 최소유량을 합하면 최종적으로 구하고자 하는 최대유량을 알수있다.
---
7. **Edmonds-Karp 알고리즘 코드 실행결과**
* 최대유량 그래프 예시는 위의 Ford-Fulkerson 알고리즘의 예시와 같다.
* BFS 활용부분  
<img width="836" alt="애드몬드 활용부분" src="https://user-images.githubusercontent.com/101388182/165456030-75267f3f-6acd-4e11-928f-cd0cdea9cfda.PNG">

* 코드 실행결과창  
<img width="552" alt="애드몬드 실행결과창" src="https://user-images.githubusercontent.com/101388182/165446024-87b67e07-eeff-4cd8-bc8e-f8a3fcf7664a.PNG">

---
8. **2개 코드의 성능분석**
* Ford-Fulkerson의 시간복잡도  
E = 엣지, V = 정점, F = 최대유량 일때 ***O(V + E) F)***
* Edmonds-Karp의 시간복잡도  
E = 엣지, V = 정점 일때 ***O(VE^2)***  

>이렇게 두 알고리즘은 시간복잡도에서 차이가 나므로 상황에 맞는 알고리즘을 활용해야 한다.  
>잘 알려진 예시로 최대유량 문제의 극단적인 상황이 있다.  
<img width="480" alt="극단적 예시" src="https://user-images.githubusercontent.com/101388182/165457666-14baba08-2ee0-4764-a22c-961b6d764bd4.PNG">

이런 그래프가 있고 Ford-Fulkerson 알고리즘으로 구현했다고 하자.  
    1. A→B→C→D 1의 유량 보냄  
    2. A→C→B→D 반대방향 엣지를 이용해 1의 유량 보냄  
    3. A→B→C→D 1의 유량 보냄  
    4. A→C→B→D 반대방향 엣지를 이용해 1의 유량 보냄  
    5. 1~4번 과정 반복  
최악의 경우 유량의 최댓값만큼 반복하게 된다.    

이번엔 Edmonds-Karp 알고리즘으로 구현했다고 하면  
    1. A→B→D 1000의 유량 보냄  
    2. A→C→D 1000의 유량 보냄  
이렇게 2번의 탐색으로 최대유량을 찾아낼 수 있다.  

* 결론  
유량의 값이 작고, 엣지가 많으면 Ford-Fulkerson이 더 빠를 수 있고  
엣지가 적고, 유량의 값이 크면 Edmonds-Karp가 더 빠를 수 있다.

---
9. 소감  
네트워크에 있어서 기본적인 Network Flow에 대해 완벽히 이해할수 있었고 무엇보다 C언어에 가장 자신이 있어서 C로 코딩하게 되었는데, 코딩중에 막히는 부분을 찾다가 덤으로 C++에서의 큐 관련 함수들을 배울 수 있어서 너무 보람찼다.
